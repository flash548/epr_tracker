(this.webpackJsonpepr_frontend=this.webpackJsonpepr_frontend||[]).push([[0],{14:function(e,a,t){},16:function(e,a,t){},17:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(4),s=t.n(l),c=(t(14),t(1)),o=t.n(c),d=t(2),u=t(5),m=t(6),i=t(8),p=t(7);var E=function(e){var a={},t={};function n(t){t.preventDefault(),e.updateEPR(a[t.target.id],t.target.id)}function l(a){a.preventDefault(),e.updateACA(t[a.target.id],a.target.id)}function s(e){a[e.target.id.split("-")[0]]=e.target.value}function c(e){t[e.target.id.split("-")[0]]=e.target.value}return 0===e.userid?r.a.createElement("div",{className:"spinner-border text-primary",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading...")):void 0===e.userid?r.a.createElement("div",null,r.a.createElement("h6",null,"User Not Found")):r.a.createElement("div",null,r.a.createElement("div",{className:"alert alert-dark",role:"alert"},"Your Rater"),r.a.createElement("p",null,e.amnData.raterInfo.rank+" "+e.amnData.raterInfo.fname+" "+e.amnData.raterInfo.mi+" "+e.amnData.raterInfo.lname),r.a.createElement("div",{className:"alert alert-dark",role:"alert"},"Your Data"),r.a.createElement("table",{className:"table table-sm"},r.a.createElement("thead",null,r.a.createElement("tr",{className:"table-primary"},r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Rank"),r.a.createElement("th",null,"EPR Last Done"),r.a.createElement("th",null,"EPR Next Due"),r.a.createElement("th",null,"ACA Last Done"),r.a.createElement("th",null,"ACA Next Due")),r.a.createElement("tr",null,r.a.createElement("td",null,e.amnData.subordinates.data.fname+" "+e.amnData.subordinates.data.mi+" "+e.amnData.subordinates.data.lname),r.a.createElement("td",null,e.amnData.subordinates.data.rank),r.a.createElement("td",null,e.amnData.subordinates.data.epr_last_done),r.a.createElement("td",null,e.amnData.subordinates.data.epr_next_due),r.a.createElement("td",null,e.amnData.subordinates.data.aca_last_done),r.a.createElement("td",null,e.amnData.subordinates.data.aca_next_due)))),r.a.createElement("div",{className:"alert alert-dark",role:"alert"},"Your Subordinate Data"),function e(a){return a.map((function(a){return r.a.createElement("div",null,r.a.createElement("table",{className:"table table-sm"},r.a.createElement("thead",null,r.a.createElement("tr",{className:"table-primary"},r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Rank"),r.a.createElement("th",null,"EPR Last Done"),r.a.createElement("th",null,"EPR Next Due"),r.a.createElement("th",null,"ACA Last Done"),r.a.createElement("th",null,"ACA Next Due"))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("button",{className:"btn btn-primary",id:"#".concat(a.data.username),"data-toggle":"collapse","data-target":"#".concat(a.data.username)},a.data.fname+" "+a.data.mi+" "+a.data.lname)),r.a.createElement("td",null,a.data.rank),r.a.createElement("td",null,r.a.createElement("div",{className:"dropdown"},a.data.epr_last_done,r.a.createElement("br",null),r.a.createElement("button",{className:"btn btn-sm btn-secondary dropdown-toggle",id:"".concat(a.data.user_id),"data-toggle":"dropdown"},"Change"),r.a.createElement("div",{className:"dropdown-menu","aria-labelledby":"".concat(a.data.username)},r.a.createElement("form",{className:"px-4 py-3"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{for:"epr_last_done_date"},"Date EPR Last Done:"),r.a.createElement("input",{type:"date",className:"form-control",id:"".concat(a.data.user_id,"-epr_last_done_date"),onChange:s})),r.a.createElement("button",{type:"submit",id:"".concat(a.data.user_id),className:"btn btn-primary btn-sm",onClick:n},"Submit"))))),r.a.createElement("td",null,a.data.epr_next_due),r.a.createElement("td",null,r.a.createElement("div",{className:"dropdown"},a.data.aca_last_done,r.a.createElement("br",null),r.a.createElement("button",{className:"btn btn-sm btn-secondary dropdown-toggle",id:"".concat(a.data.user_id),"data-toggle":"dropdown"},"Change"),r.a.createElement("div",{className:"dropdown-menu","aria-labelledby":"".concat(a.data.username)},r.a.createElement("form",{className:"px-4 py-3"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{for:"aca_last_done_date"},"Date ACA Last Done:"),r.a.createElement("input",{type:"date",className:"form-control",id:"".concat(a.data.user_id,"-aca_last_done_date"),onChange:c})),r.a.createElement("button",{type:"button","data-toggle":"dropdown",id:"".concat(a.data.user_id),className:"btn btn-primary btn-sm",onClick:l},"Submit"))))),r.a.createElement("td",null,a.data.aca_next_due)))),r.a.createElement("div",{className:"collapse",id:"".concat(a.data.username)},r.a.createElement("div",{className:"card card-body"},a.reports&&a.reports.length>0?e(a.reports):r.a.createElement("div",null,"No subordinates"))))}))}(e.amnData.subordinates.reports))},b=(t(16),function(e){Object(i.a)(t,e);var a=Object(p.a)(t);function t(e){var n;if(Object(u.a)(this,t),(n=a.call(this,e)).getUserData=function(){var e=Object(d.a)(o.a.mark((function e(a){var t,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={},e.prev=1,e.next=4,fetch("".concat(n.baseurl,"/getRecord?userid=").concat(a));case 4:return r=e.sent,e.next=7,r.json();case 7:t=e.sent,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),t={raterInfo:{user_id:"",username:"",fname:"Error",mi:"",lname:"",rank:"",epr_last_done:"",epr_next_due:"",aca_last_done:"",aca_next_due:""},subordinates:{data:{user_id:"",username:"",fname:"Error",mi:"",lname:"",rank:"",epr_last_done:"",epr_next_due:"",aca_last_done:"",aca_next_due:""},reports:[]}};case 13:return e.prev=13,n.setState({userid:a,amnData:t}),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[1,10,13,16]])})));return function(a){return e.apply(this,arguments)}}(),n.updateEPR=function(){var e=Object(d.a)(o.a.mark((function e(a,t){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=2;break}return e.abrupt("return");case 2:return r={user_id:t,epr_last_done:a,epr_next_due:new Date(new Date(a).setDate(new Date(a).getDate()+360))},e.next=5,fetch("".concat(n.baseurl,"/updateUserForms"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});case 5:n.getUserData(n.state.userid);case 6:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}(),n.updateACA=function(){var e=Object(d.a)(o.a.mark((function e(a,t){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=2;break}return e.abrupt("return");case 2:return r={user_id:t,aca_last_done:a,aca_next_due:new Date(new Date(a).setDate(new Date(a).getDate()+360))},e.next=5,fetch("".concat(n.baseurl,"/updateUserForms"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});case 5:n.getUserData(n.state.userid);case 6:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}(),n.baseurl="http://localhost:3000",n.state={userid:0,amnData:{},firstname:e.firstname,lastname:e.lastname},!e.firstname||!e.lastname){var r=window.location.search.match(/\?firstname=(.+)&lastname=(.+)/);r&&(n.state.firstname=r[1],n.state.lastname=r[2])}return n}return Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=Object(d.a)(o.a.mark((function e(){var a,t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={user_id:0},e.prev=1,e.next=4,fetch("".concat(this.baseurl,"/user?firstname=").concat(this.state.firstname,"&lastname=").concat(this.state.lastname));case 4:return t=e.sent,e.next=7,t.json();case 7:a=e.sent,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),a={user_id:0};case 13:return e.prev=13,e.next=16,this.getUserData(a.user_id);case 16:return e.finish(13);case 17:case"end":return e.stop()}}),e,this,[[1,10,13,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",{className:"container border border-primary"},r.a.createElement("div",{className:"App"},r.a.createElement("h4",null,"EPR/ACA Tracker"),r.a.createElement(E,{userid:this.state.userid,amnData:this.state.amnData,updateEPR:this.updateEPR,updateACA:this.updateACA})))}}]),t}(r.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(b,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},9:function(e,a,t){e.exports=t(17)}},[[9,1,2]]]);
//# sourceMappingURL=main.288a5323.chunk.js.map